# 1.11 谬误和陷阱

本节将在每一章中出现，目的是解释一些你应该避免的普遍存在的错误观念或误解。我们把这种误信称为谬误。在讨论一个谬误时，我们试图给出一个反例。我们也讨论陷阱--容易犯的错误。通常情况下，陷阱是对原则的概括，而这些原则在有限的背景下是真实的。这些章节的目的是帮助你避免在你设计的计算机中犯这些错误。

**陷阱** _所有的指数规律都将应验。_

第一个被淘汰的是Dennard定律。Dennard在1974年的观察是，随着晶体管变小，功率密度是不变的。如果一个晶体管的线性区域缩小了2倍，那么电流和电压也减少了2倍，因此它使用的功率下降了4倍。Dennard定律在被观察到30年后结束了，不是因为晶体管没有继续变小，而是因为集成电路的可靠性限制了电流和电压可以下降的程度。阈值电压被驱动得如此之低，以至于静态功率成为总功率的一个重要部分。&#x20;

下一个例子是硬盘驱动器。虽然磁盘没有规律可循，但在过去30年中，硬盘的最大面积密度--它决定了磁盘容量--每年提高30%-100%。在最近几年里，每年的增长率低于5%。每块硬盘密度的提高主要来自于在硬盘上增加更多的盘片。&#x20;

接下来是古老的摩尔定律。自从每块芯片的晶体管数量每隔一到两年就翻一番以来，已经有一段时间了。例如，2014年推出的DRAM芯片包含80亿个晶体管，直到2019年我们才会有160亿个晶体管的DRAM芯片投入量产。但如果按照摩尔定律的预测，那将会有640亿个晶体管的DRAM芯片。&#x20;

此外，平面逻辑晶体管数目的实际扩张的结束甚至被预测为到2021年。图1.22显示了两版《国际半导体技术路线图》（ITRS）对逻辑晶体管门长度的预测。与2013年报告预测到2028年栅极长度将达到5纳米不同，2015年报告预测到2021年长度停止在10纳米。此后的密度改进将不得不来自缩小晶体管尺寸以外的其他方式。这并不像ITRS建议的那样可怕，因为像英特尔和台积电这样的公司已经计划将逻辑门长度缩小到3纳米，但是变化的速度正在下降。

![图1.22 从两版ITRS报告中对逻辑晶体管尺寸的预测。 这些报告始于2001年，但2015年将是最后一版，因为该小组因兴趣减退而解散了。今天能够生产最先进的逻辑芯片的公司只有GlobalFoundaries、英特尔、三星和台积电，而在第一份ITRS报告发布时有19家。由于只剩下四家公司，分享计划太难维持。摘自IEEE Spectrum，2016年7月，"摩尔定律路线图预测，晶体管将在2021年停止缩小"，作者Rachel Courtland。](../.gitbook/assets/NeatReader-1656408465465.png)

图1.23显示了微处理器和DRAM--它们受到Dennard定律的结束和摩尔定律的影响--以及磁盘的带宽随时间增长的变化。技术改进的放缓在下降的曲线中很明显。网络的持续改进是由于光纤的进步和脉冲振幅调制（PAM-4）的计划改变，允许两比特编码，以便以400Gbit/s的速度传输信息。

![图1.23 根据图1.10中的数据，微处理器、网络、内存和磁盘在一段时间内的相对带宽提升。](../.gitbook/assets/NeatReader-1656408708450.png)

**谬论** _多核处理器是银弹。_

2005年左右转向每片多处理器并不是因为有什么突破，大大简化了并行编程或使建立多核计算机变得容易。发生这种变化是因为由于ILP墙和功率墙的存在，没有其他选择。每个芯片上的多个处理器并不能保证更低的功率；设计一个使用更高功率的多核芯片当然是可行的。潜力只是有可能通过用几个较低时钟频率的高效内核取代一个高时钟频率的低效内核来继续提高性能。随着缩小晶体管的技术改进，它可以将电容和电源电压都缩小一些，这样我们就可以在每一代的内核数量上得到适度的增加。例如，在过去的几年里，英特尔在他们的高端芯片中每一代都会增加两个内核。 正如我们将在第4章和第5章中看到的，性能提升现在是程序员的工作。程序员依靠硬件设计者来使他们的程序更快，而不用动一根手指的La-Z-Boy时代已经正式结束了。如果程序员希望他们的程序每一代都能更快，他们必须使他们的程序更加并行。 摩尔定律的流行版本--随着每一代技术的发展而提高性能--现在由程序员决定了。

**陷阱** _沦为阿姆达尔令人心碎的定律的牺牲品。_

几乎每个从业的计算机架构设计者都知道阿姆达尔定律。尽管如此，我们几乎都会在测量其使用情况之前，偶尔花费巨大的精力来优化某些功能。只有当整体的速度提升令人失望时，我们才会想起，在我们花了这么多精力来增强它之前，我们应该先测量一下！

**陷阱** _单点故障。_

[1.7节](1.7-ke-kao-xing.md)使用阿姆达尔定律进行的可靠性改进的计算表明，可靠性不会比链条中最弱的一环更强。无论我们如何提高电源的可靠性，正如我们在例子中所做的那样，单个风扇将限制磁盘子系统的可靠性。这个阿姆达尔定律的观察导致了一个容错系统的经验法则，即确保每一个组件都是冗余的，这样就没有一个组件的故障会使整个系统崩溃。第6章展示了软件层如何避免WSCs内部的单点故障。
